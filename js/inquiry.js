<script> (function () { const panels = document.querySelectorAll(".inquiry-step-panel"); const maxStep = panels.length; let currentStep = 1; const btnBackTop = document.getElementById("btnBack"); const btnBackBottom = document.getElementById("btnBackBottom"); const btnNext = document.getElementById("btnNext"); const btnSubmit = document.getElementById("btnSubmit"); const progressFill = document.getElementById("progressFill"); const form = document.getElementById("quoteForm"); function showStep(step) { if (step < 1 || step > maxStep) return; currentStep = step; panels.forEach(panel => { const s = Number(panel.getAttribute("data-step-panel")); panel.classList.toggle("active", s === currentStep); }); // Back button states const atFirst = currentStep === 1; btnBackTop.disabled = atFirst; // Bottom back btnBackBottom.disabled = atFirst; // Next vs Submit const atLast = currentStep === maxStep; btnNext.style.display = atLast ? "none" : "inline-flex"; btnSubmit.style.display = atLast ? "inline-flex" : "none"; // Progress (0% at step 1, 100% at step max) const pct = ((currentStep - 1) / (maxStep - 1)) * 100; progressFill.style.width = pct + "%"; // Scroll to card const wrapper = document.querySelector(".inquiry-flow"); if (wrapper) { window.scrollTo({ top: wrapper.offsetTop - 40, behavior: "smooth" }); } } function validateCurrentStep() { const activePanel = document.querySelector( .inquiry-step-panel[data-step-panel="${currentStep}"] ); if (!activePanel) return true; // Required radio groups const requiredGroup = activePanel.querySelector("[data-required-radio-group]"); if (requiredGroup) { const groupName = requiredGroup.getAttribute("data-required-radio-group"); const radios = requiredGroup.querySelectorAll(input[type="radio"][name="${groupName}"]); const checked = Array.from(radios).some(r => r.checked); if (!checked) { // focus first if (radios[0]) radios[0].focus(); return false; } } // Step 1: require at least one destination if (currentStep === 1) { const dests = activePanel.querySelectorAll('input[name="destinations"]:checked'); if (!dests.length) return false; } // You can add extra validation for dates/month here as needed return true; } function toggleTravelTimingUI() { const travelTimingRadios = document.querySelectorAll('input[name="travel_timing"]'); const specificDatesBlock = document.getElementById("specificDatesBlock"); const yearMonthBlock = document.getElementById("yearMonthBlock"); let value = ""; travelTimingRadios.forEach(r => { if (r.checked) value = r.value; }); if (value === "specific_dates") { if (specificDatesBlock) specificDatesBlock.style.display = "grid"; if (yearMonthBlock) yearMonthBlock.style.display = "none"; } else if (value === "2025" || value === "2026" || value === "2027" || value === "flexible") { if (specificDatesBlock) specificDatesBlock.style.display = "none"; if (yearMonthBlock) yearMonthBlock.style.display = "grid"; } else { if (specificDatesBlock) specificDatesBlock.style.display = "none"; if (yearMonthBlock) yearMonthBlock.style.display = "none"; } } // Set up click handling for choice pills to add "selected" class document.querySelectorAll(".choice-pill input").forEach(input => { input.addEventListener("change", () => { const label = input.closest(".choice-pill"); if (!label) return; if (input.type === "checkbox") { label.classList.toggle("selected", input.checked); } else if (input.type === "radio") { // clear siblings const name = input.name; document.querySelectorAll(.choice-pill input[type="radio"][name="${name}"]).forEach(r => { const l = r.closest(".choice-pill"); if (l) l.classList.toggle("selected", r.checked); }); } // Travel timing conditional UI if (input.name === "travel_timing") { toggleTravelTimingUI(); } }); }); // Next / Back buttons btnNext.addEventListener("click", () => { if (!validateCurrentStep()) return; if (currentStep < maxStep) showStep(currentStep + 1); }); function goBack() { if (currentStep > 1) showStep(currentStep - 1); } btnBackTop.addEventListener("click", goBack); btnBackBottom.addEventListener("click", goBack); // Travel timing listeners for initial state document.querySelectorAll('input[name="travel_timing"]').forEach(radio => { radio.addEventListener("change", toggleTravelTimingUI); }); toggleTravelTimingUI(); // Handle submit (send to your backend / Zendesk / etc) form.addEventListener("submit", function (e) { e.preventDefault(); // Final simple check if (!form.checkValidity()) { form.reportValidity(); return; } // TODO: hook into your backend or Zendesk here. // For now, just replace form with a success message. form.innerHTML = <div class="success-message"> <h2>Thank you for your enquiry</h2> <p>Our team will review your preferences and get back to you with tailored safari suggestions shortly.</p> </div> ; progressFill.style.width = "100%"; }); // Init showStep(1); })(); </script>
